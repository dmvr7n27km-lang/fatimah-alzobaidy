<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø¨Ø¯Ø¹Ø© Ø§Ù„ÙÙ‡Ù… Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠ - ÙØ§Ø·Ù…Ø© Ø§Ù„Ø²Ø¨ÙŠØ¯ÙŠ</title>
    <style>
        :root { --primary-pink: #e91e63; --soft-purple: #9c27b0; --bg-gradient: linear-gradient(135deg, #fff0f5 0%, #f3e5f5 100%); --blue-info: #e3f2fd; }
        body { background: var(--bg-gradient); font-family: 'Segoe UI', Tahoma, sans-serif; margin: 0; padding: 0; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }

        /* Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ø±Ø³Ù…ÙŠ */
        .official-header { width: 100%; text-align: right; padding: 15px 20px; font-size: 13px; font-weight: bold; color: #4a235a; line-height: 1.6; box-sizing: border-box; }
        .main-card { background: white; width: 90%; padding: 25px; border-radius: 25px; box-shadow: 0 10px 20px rgba(233,30,99,0.1); text-align: center; border: 1px solid #ffd1dc; margin-bottom: 20px; }
        .teacher-info { color: var(--primary-pink); font-weight: bold; font-size: 16px; }

        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª */
        .stats-bar { display: flex; justify-content: space-around; background: white; width: 90%; padding: 15px 0; border-radius: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.03); margin-bottom: 25px; }
        .stat-num { display: block; font-size: 22px; font-weight: 900; color: #fb8c00; }
        .stat-label { font-size: 12px; color: #666; font-weight: bold; }

        /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± ÙˆØ§Ù„Ø¯Ø±ÙˆØ³ */
        .lesson-btn { background: white; width: 90%; padding: 18px; margin-bottom: 15px; border-radius: 20px; border: 2px solid #ffc1e3; display: flex; justify-content: space-between; align-items: center; cursor: pointer; font-weight: bold; color: #5c3b8a; transition: 0.3s; }
        .lesson-btn:hover { border-color: var(--primary-pink); background: #fff9fb; }

        /* Ø´Ø§Ø´Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± */
        .screen { width: 100%; display: none; flex-direction: column; align-items: center; padding-bottom: 40px; }
        .active-screen { display: flex; }
        .reading-box { background: white; width: 90%; padding: 20px; border-radius: 20px; margin: 15px 0; border-right: 8px solid var(--primary-pink); box-shadow: 0 4px 12px rgba(0,0,0,0.05); text-align: right; line-height: 1.8; box-sizing: border-box; }
        
        .q-card { width: 90%; background: white; padding: 20px; border-radius: 20px; margin-bottom: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); box-sizing: border-box; }
        .option { background: #f8f9fa; border: 2px solid #eee; padding: 14px; margin: 10px 0; border-radius: 15px; display: flex; align-items: center; justify-content: space-between; cursor: pointer; font-weight: bold; }
        .circle { width: 32px; height: 32px; border: 2px solid #444; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 14px; }
        
        .correct { background: #e8f5e9 !important; border-color: #4caf50 !important; color: #2e7d32; }
        .wrong { background: #ffebee !important; border-color: #f44336 !important; color: #c62828; }

        /* Ù†Ø§ÙØ°Ø© Ø§Ù„Ø§Ø³Ù… */
        #name-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 100; align-items: center; justify-content: center; }
        .modal-content { background: white; padding: 30px; border-radius: 25px; text-align: center; width: 85%; }

        /* Ø§Ù„Ø´Ø±Ø­ ÙˆØ§Ù„Ø²Ø± */
        #explanation-box { display: none; background: var(--blue-info); border: 1px solid #2196f3; padding: 15px; border-radius: 15px; margin: 10px 0; width: 90%; font-size: 14px; color: #0d47a1; line-height: 1.6; }
        .btn-next { background: #2196f3; color: white; border: none; padding: 15px 35px; border-radius: 30px; font-weight: bold; cursor: pointer; display: none; width: 80%; }
        .btn-action { background: var(--primary-pink); color: white; border: none; padding: 12px 30px; border-radius: 25px; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>

    <div id="main-menu" class="active-screen screen">
        <div class="official-header">Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© | ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ… | Ø§Ù„Ù…ØªÙˆØ³Ø·Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ Ø¨Ø§Ù„Ù„ÙŠØ«</div>
        <div class="main-card">
            <h1>ğŸŒ¸ Ù…ÙØ¨Ø¯Ø¹Ø© Ø§Ù„ÙÙ‡Ù… Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠ ğŸŒ¸</h1>
            <div class="teacher-info">Ø§Ù„Ù…Ø¹Ù„Ù…Ø©: ÙØ§Ø·Ù…Ø© Ø­Ø³Ù† Ø§Ù„Ø²Ø¨ÙŠØ¯ÙŠ</div>
        </div>
        <div class="stats-bar">
            <div class="stat-item"><span class="stat-num" id="stars-display">0 â­</span><span class="stat-label">Ø§Ù„Ù†Ø¬ÙˆÙ…</span></div>
            <div class="stat-item"><span class="stat-num" id="done-display">0</span><span class="stat-label">Ø¥Ù†Ø¬Ø§Ø²</span></div>
            <div class="stat-item"><span class="stat-num">5</span><span class="stat-label">Ø¯Ø±ÙˆØ³</span></div>
        </div>
        <div class="lesson-btn" onclick="askName('takhmeen')"><span>ğŸ¯ Ø§Ù„ØªØ®Ù…ÙŠÙ† ÙˆØ§Ù„ØªØ­Ù‚Ù‚</span> â­</div>
        <div class="lesson-btn" onclick="askName('namat')"><span>ğŸ” Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù†Ù…Ø·</span> â­</div>
    </div>

    <div id="name-modal">
        <div class="modal-content">
            <h3>Ø£Ù‡Ù„Ø§Ù‹ Ø¨ÙƒÙ ÙŠØ§ Ù…Ø¨Ø¯Ø¹Ø©! ğŸŒŸ</h3>
            <input type="text" id="student-name" style="width:90%; padding:10px; margin:15px 0; border-radius:10px;" placeholder="Ø§ÙƒØªØ¨ÙŠ Ø§Ø³Ù…ÙƒÙ Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ">
            <button class="btn-action" onclick="confirmStart()">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¯Ø±Ø³ ğŸš€</button>
        </div>
    </div>

    <div id="lesson-screen" class="screen">
        <div id="student-tag" style="padding:10px; color:var(--primary-pink); font-weight:bold;"></div>
        <div class="reading-box" id="reading-text"></div>
        <div id="q-container" style="width:100%; display:flex; flex-direction:column; align-items:center;"></div>
        <div id="explanation-box"></div>
        <button id="btn-next" class="btn-next" onclick="nextQuestion()">Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ â¬…ï¸</button>
    </div>

    <script>
        let stars = parseInt(localStorage.getItem('stars')) || 0;
        let completed = parseInt(localStorage.getItem('completed')) || 0;
        let currentLesson = ''; let currentQ = 1;

        document.getElementById('stars-display').innerText = stars + " â­";
        document.getElementById('done-display').innerText = completed;

        function askName(id) { currentLesson = id; document.getElementById('name-modal').style.display = 'flex'; }

        function confirmStart() {
            let name = document.getElementById('student-name').value;
            if(name.length < 3) return alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø§Ø³Ù…");
            document.getElementById('name-modal').style.display = 'none';
            document.getElementById('main-menu').classList.remove('active-screen');
            document.getElementById('lesson-screen').classList.add('active-screen');
            document.getElementById('student-tag').innerText = "Ø§Ù„Ù…Ø¨Ø¯Ø¹Ø©: " + name;
            loadLesson();
        }

        function loadLesson() {
            const rt = document.getElementById('reading-text');
            if(currentLesson === 'takhmeen') {
                rt.innerHTML = `<b>ğŸ“– Ù‚ØµØ© Ø³Ø§Ø±Ø©:</b> Ø§Ø´ØªØ±Øª Ø³Ø§Ø±Ø© ÙƒØªØ§Ø¨ÙŠÙ† Ø¨Ù€ 45 Ø±ÙŠØ§Ù„Ø§Ù‹ØŒ Ø§Ù„Ø£ÙˆÙ„ ÙŠØ²ÙŠØ¯ Ø¹Ù† Ø§Ù„Ø«Ø§Ù†ÙŠ Ø¨Ù€ 9 Ø±ÙŠØ§Ù„Ø§Øª. Ø³Ø§Ø¹Ø¯ÙŠÙ‡Ø§ Ø¨Ø§Ù„ØªØ®Ù…ÙŠÙ† ÙˆØ§Ù„ØªØ­Ù‚Ù‚.`;
            } else {
                rt.innerHTML = `<b>ğŸ“– Ù‚ØµØ© Ù†ÙˆØ±Ø©:</b> Ù‚Ø±Ø£Øª Ù†ÙˆØ±Ø© ØµÙØ­Ø§Øª ÙŠÙˆÙ…ÙŠØ§Ù‹ ÙƒØ§Ù„ØªØ§Ù„ÙŠ: (2ØŒ 5ØŒ 9ØŒ 14). Ø³Ø§Ø¹Ø¯ÙŠÙ‡Ø§ ÙÙŠ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù†Ù…Ø· Ù„Ù…Ø¹Ø±ÙØ© Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø³Ø§Ø¯Ø³.`;
            }
            loadQuestion(1);
        }

        function loadQuestion(num) {
            currentQ = num;
            const cont = document.getElementById('q-container');
            document.getElementById('explanation-box').style.display = 'none';
            document.getElementById('btn-next').style.display = 'none';

            if(currentLesson === 'takhmeen') {
                if(num === 1) renderQ("1ï¸âƒ£ Ù…Ø§ Ø§Ù„Ù…Ø¹Ø·ÙŠØ§Øª ÙÙŠ Ø§Ù„Ù†ØµØŸ", "Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ 45 ÙˆØ§Ù„ÙØ±Ù‚ 9", "Ø¨", "Ø§Ù„Ù…Ø¹Ø·ÙŠØ§Øª Ù‡ÙŠ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø±Ù‚Ù…ÙŠØ© Ø§Ù„Ù…Ø¹Ø·Ø§Ø© Ù„Ù„Ø­Ù„.");
                else if(num === 2) renderQ("2ï¸âƒ£ Ù…Ø§ Ø§Ù„ØªØ®Ù…ÙŠÙ† Ø§Ù„ØµØ­ÙŠØ­ Ù„Ù„Ø­Ù„ØŸ", "(27 ØŒ 18)", "Ø¬", "Ù„Ø£Ù† 27+18=45 Ùˆ 27-18=9.");
                else if(num === 3) renderQ("3ï¸âƒ£ ÙƒÙŠÙ Ù†ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ù„ØŸ", "Ø¨Ø§Ù„Ø¬Ù…Ø¹ ÙˆØ§Ù„Ø·Ø±Ø­ Ù„Ù„ØªØ£ÙƒØ¯", "Ø£", "Ø§Ù„ØªØ­Ù‚Ù‚ ÙŠØ¶Ù…Ù† Ø£Ù† ØªØ®Ù…ÙŠÙ†Ù†Ø§ ÙŠØ·Ø§Ø¨Ù‚ Ù…Ø¹Ø·ÙŠØ§Øª Ø§Ù„Ù…Ø³Ø£Ù„Ø©.");
            } else {
                if(num === 1) renderQ("1ï¸âƒ£ Ù…Ø§ Ø§Ù„Ù…Ø¹Ø·ÙŠØ§Øª ÙÙŠ Ù†Øµ Ù†ÙˆØ±Ø©ØŸ", "Ø¹Ø¯Ø¯ ØµÙØ­Ø§Øª Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ø£Ø±Ø¨Ø¹Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰", "Ø¨", "Ø§Ù„Ù…Ø¹Ø·ÙŠØ§Øª Ù‡ÙŠ Ø§Ù„ØªØ³Ù„Ø³Ù„ (2ØŒ 5ØŒ 9ØŒ 14).");
                else if(num === 2) renderQ("2ï¸âƒ£ Ù…Ø§ Ù…Ù‚Ø¯Ø§Ø± Ø§Ù„Ø²ÙŠØ§Ø¯Ø© ÙÙŠ Ø§Ù„Ù†Ù…Ø·ØŸ", "Ø²ÙŠØ§Ø¯Ø© Ù…ØªØºÙŠØ±Ø© (+3ØŒ +4ØŒ +5...)", "Ø¨", "Ù†Ù„Ø§Ø­Ø¸ Ø£Ù† Ù…Ù‚Ø¯Ø§Ø± Ø§Ù„Ø²ÙŠØ§Ø¯Ø© Ù†ÙØ³Ù‡ ÙŠØ²Ø¯Ø§Ø¯ ÙˆØ§Ø­Ø¯Ø§Ù‹ ÙÙŠ ÙƒÙ„ Ø®Ø·ÙˆØ©.");
                else if(num === 3) renderQ("3ï¸âƒ£ ÙƒÙ… ØµÙØ­Ø© Ø³ØªÙ‚Ø±Ø£ ÙÙŠ Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø³Ø§Ø¯Ø³ØŸ", "27 ØµÙØ­Ø©", "Ø¬", "Ø¨Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ù†Ù…Ø·: Ø§Ù„ÙŠÙˆÙ… 5 Ù‡Ùˆ 20ØŒ ÙˆØ§Ù„ÙŠÙˆÙ… 6 Ù‡Ùˆ 27.");
            }
        }

        function renderQ(title, correctTxt, correctLetter, exp) {
            const letters = ['Ø£', 'Ø¨', 'Ø¬', 'Ø¯'];
            let html = `<div class="q-card"><b>${title}</b>`;
            letters.forEach(l => {
                let isC = (l === correctLetter);
                html += `<div class="option" onclick="check(this, ${isC}, '${exp}')">${isC ? correctTxt : 'Ø®ÙŠØ§Ø± ØºÙŠØ± ØµØ­ÙŠØ­'} <div class="circle">${l}</div></div>`;
            });
            document.getElementById('q-container').innerHTML = html + `</div>`;
        }

        function check(el, isCorrect, exp) {
            if(isCorrect) {
                el.classList.add('correct');
                stars += 3;
                localStorage.setItem('stars', stars);
                document.getElementById('stars-display').innerText = stars + " â­";
                document.getElementById('explanation-box').innerHTML = "ğŸ’¡ <b>Ø§Ù„ØªØºØ°ÙŠØ© Ø§Ù„Ø±Ø§Ø¬Ø¹Ø©:</b><br>" + exp;
                document.getElementById('explanation-box').style.display = 'block';
                document.getElementById('btn-next').style.display = 'block';
                document.querySelectorAll('.option').forEach(o => o.style.pointerEvents = 'none');
            } else {
                el.classList.add('wrong');
                setTimeout(() => el.classList.remove('wrong'), 800);
            }
        }

        function nextQuestion() {
            if(currentQ < 3) loadQuestion(currentQ + 1);
            else {
                completed++; localStorage.setItem('completed', completed);
                alert("Ø£Ø­Ø³Ù†ØªÙ! ØªÙ… Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¯Ø±Ø³ Ø¨Ù†Ø¬Ø§Ø­."); location.reload();
            }
        }
    </script>
</body>
</html>
